# Сервисы и события

## Сервисы:

- Авторизация
- Таск-трекер
- Аккаунтинг
- Выплаты
- BFF Аккаунтинга
- Аналитика

## BE между сервисами
### Сотрудник создал задачу
* продюсер - таск-трекер
* консюмеры - аккаунтинг
* данные - pid ассайнутого сотрудника + pid задачи + описание задачи + сумма списания

### Открытые задачи переассайнены
* продюсер - таск-трекер
* консюмеры - аккаунтинг
* данные (batch) - pid ассайнутого сотрудника + pid задачи + описание задачи + сумма списания

### Cотрудник отметил задачу выполненной
* продюсер - таск-трекер
* консюмеры - аккаунтинг
* данные - pid ассайнутого сотрудника + pid задачи + сумма вознаграждения

### Авторизация в таск-трекере
* синхронный флоу - сервис авторизации -> таск-трекер
* данные - клюв -> JWT(pid + роль)

### Авторизация в BFF аккаунтинга
* синхронный флоу - сервис авторизации -> BFF аккаунтинга
* данные - клюв -> JWT(pid + роль)

### Авторизация в аналитике
* синхронный флоу - сервис авторизации -> аналитика
* данные - клюв -> JWT(pid + роль)


## CUD события
### Создание аккаунта
* продюсер - сервис авторизации
* консюмеры - таск-трекер, аналитика, выплаты, аналитика
* данные (только выплаты) - pid и почта акаунта
* данные (остальные) - pid и роль акаунта

### Обновление роли аккаунта
* продюсер - сервис авторизации
* консюмеры - таск-трекер, аналитика, выплаты, аналитика
* данные - pid и роль акаунта

### Обновление почты аккаунта
* продюсер - сервис авторизации
* консюмеры - выплаты
* данные - pid и почта акаунта

### Обновление описания задачи
* продюсер - таск-трекер
* консюмеры - аккаунтинг
* данные - pid и описание задачи

### Создание задачи
* продюсер - таск-трекер
* консюмеры - аналитика
* данные - pid и вознаграждение задачи

### Создание и обновления счета
* продюсер - аккаунтинг
* консюмеры - выплаты и аналитика
* данные - pid и сумма счета

### Обнуление счета
* продюсер - выплаты
* консюмеры - аккаунтинг
* данные - pid счета

### Создание аудит-лога
* продюсер - аккаунтинг
* консюмеры - аналитика
* данные - pid аудитлога + pid аккаунта + pid задачи + сумма списания или начисления

