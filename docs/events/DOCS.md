# Сервисы и события

## Сервисы:

- Авторизация
- Таск-трекер
- Аккаунтинг
- Аналитика

## BE между сервисами
### Задача добавлена
* продюсер - таск-трекер
* консюмеры - аккаунтинг
* данные - pid ассайнутого сотрудника + pid задачи + описание задачи + сумма списания

### Задачи перетасованы
* продюсер - таск-трекер
* консюмеры - аккаунтинг
* данные (batch) - pid ассайнутого сотрудника + pid задачи + описание задачи + сумма списания

### Задача выполнена
* продюсер - таск-трекер
* консюмеры - аккаунтинг
* данные - pid ассайнутого сотрудника + pid задачи + сумма вознаграждения

### Сотрудник авторизовался в таск-трекере
* синхронный флоу - сервис авторизации -> таск-трекер
* данные - клюв -> JWT(pid + роль)

### Сотрудник авторизовался в дашборде аккаунтинга
* синхронный флоу - сервис авторизации -> аккаунтинг
* данные - клюв -> JWT(pid + роль)

### Админ авторизовался в дашборде аналитики
* синхронный флоу - сервис авторизации -> аналитика
* данные - клюв -> JWT(pid + роль)


## CUD события
### Создан аккаунт
* продюсер - сервис авторизации
* консюмеры - таск-трекер, аккаунтинг, аналитика
* данные (только аккаунтг) - pid, роль и почта акаунта
* данные (остальные) - pid и роль акаунта

### Обновлена роль аккаунта
* продюсер - сервис авторизации
* консюмеры - таск-трекер, аккаунтинг, аналитика
* данные - pid и роль акаунта

### Обновлена почта аккаунта
* продюсер - сервис авторизации
* консюмеры - аккаунтинг
* данные - pid и почта акаунта

### Обновлено описание задачи
* продюсер - таск-трекер
* консюмеры - аккаунтинг
* данные - pid и описание задачи

### Создана задача
* продюсер - таск-трекер
* консюмеры - аналитика
* данные - задача

### Создан или обновлен счет
* продюсер - аккаунтинг
* консюмеры - аналитика
* данные - счет

### Создан аудит-лог
* продюсер - аккаунтинг
* консюмеры - аналитика
* данные - pid аудитлога + pid аккаунта + pid задачи + сумма списания или начисления

